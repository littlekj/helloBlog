{% load static %}
{% load page_tags %}
{% meta_data %}

<!-- 引入 Bootstrap 的核心库，处理前端交互和组件功能 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

<!--切换主题模式-->
<script src="{% static 'assets/js/dist/switch-theme.js' %}"></script>

<!--返回顶部-->
<script src="{% static 'assets/js/dist/back-to-top.js' %}"></script>

<!--侧边栏显示状态切换-->
<script type="module" src="{% static 'assets/js/dist/sidebar.js' %}"></script>

<!-- 根据页面布局确定使用的 JS 文件 -->
{% if meta.type == 'article' %}
    <!-- 引入 Prism.js 核心库 -->
    <!-- 引入行号插件的 JS -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism-line-numbers.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!--动态添加 line-numbers 类-->
    <script>
        document.querySelectorAll('pre code').forEach((block) => {
            block.parentElement.classList.add('line-numbers');
        });
    </script>

    <!-- Latex 数学公式渲染 -->
    <!-- 在 Mathjax 的脚本加载前配置 MathJax 的设置 -->
    <!-- 以支持行内和块级数学公式的显示，并使用 SVG 渲染数学公式 -->
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <!-- 异步加载 MathJax 脚本 -->
    <script async id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>

    <!--剪切板-->
    <script src="{% static 'assets/js/dist/clipboard.min.js' %}"></script>

{% endif %}

{% comment %}
<!-- 包含 Day.js 相关的 JS 文件 -->

<!-- 如果页面启用了 Mermaid 图表，则加载 Mermaid JS 文件 -->

<!-- 页面浏览量统计 -->

<!-- 如果页面启用了 Mermaid 图表，加载相关的 HTML 部分 -->

<!-- 如果在生产环境下，加载 PWA 和 Web Analytics -->

<!-- PWA 支持 -->

<!-- Web Analytics 统计 -->
{% endcomment %}
